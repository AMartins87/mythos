{% extends 'base.html' %}
{% block title %} {{post.title_tag}} {% endblock %}

{% block content %}

<h3>{{post.title}}</h3><br />
<h6>by {{post.author }}</h6>
<em>{{ post.post_date }}</em>

{% comment %} added {% endcomment %}
<small><a class="return_home" href="{% url 'home' %}">Return</a></small><br />
{% if user.is_authenticated %}{% if user.id == post.author.id %}

<div class="user_changes">
        <small><a href="{% url 'update_post' post.pk %}">Edit |</a></small>
        <small><a href="{% url 'delete_post' post.pk %}">Delete</a></small>
        <hr>
</div>
{% endif %}
{% endif %}
{% comment %} {% endcomment %}
<div class="story_body">
        <p>{{ post.body|safe }}</p>
</div>
<br><br />
<div class="image-container">
        {% if post.story_image.url %}
        <img src=" {{ post.story_image.url }}" class="card-img-top" alt="Image uploaded by user">
        {% endif %}
</div>
<hr>
<br />
{% if user.is_authenticated %}

<form action="{% url 'like_post' post.pk %}" method="POST">
        {% csrf_token %}

        <button type="submit" , name="post_id" , value="{{post.id}}" , class="btn btn-success me-md-2 btn-sm"
                type="button">Like</button>

</form>

{% endif %}

<b>{{total_likes}} likes</b>
<br />

<h2>Comments:</h2>

{% if not post.comments.all %} No Comments Yet
{% else %}
{% for comment in post.comments.all %}

<strong>{{comment.name}} - {{comment.date_added }}</strong><br />{{comment.body}}
<br />

{% endfor %}
{% endif %}
<br />
<a href="{% url 'comment' post.pk %}">Add comments</a>
<hr>
{% endblock %}